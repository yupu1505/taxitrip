#Taxi of NYC

Taxitrip application that performs spatial-temporal analysis for NYC taxi trips

### What is this repository for? ###

The New York City Taxi and Limousine Commission collects the taxi trips in New York City categorized by the taxi type. The taxi trip data describes for each trip, the time and location id of pickup/dropoff, number of passengers, fare, tips, distance, etc.

The taxitrip application models the space and time over the city (which contains more than 200 zones) with a 3D spatio-temporal grid. The 3D grid contains a date time grid and space grid so analytical measures can be aggregate on either 2D or 3D

Currently, the application report below **analytical measures**:
- The highest 50 spatio-temporal cells, by pickup coordinates, in terms of aggregated passengers count and fare amount.
- The highest 10 days in terms of trips count across the whole city
- The highest 50 pickup-dropoff spatial cells pair - the most common trips

### Analysis Input ###

#### Input Files ####
Green taxi trip data of 2022 Feb in csv format downloaded from https://www1.nyc.gov/site/tlc/about/tlc-trip-record-data.page

The application currently works on trip data of one month

NYC taxi zones in csv format downloaded from https://data.cityofnewyork.us/Transportation/NYC-Taxi-Zones/d3c5-ddgc

### Analysis Output ###

The Outputs are printed in a separate file named taxiTripOutput.txt. Cells are reported by the coordinates of its top right corner

### Configurations ###
The taxi trip data file, NYC zones file, the space grid size, the time grid size are configurable and can updated in conf file or provided as command line arguments when running the application.

The application configuration file is at taxitrip/src/main/resources/application.conf

### Environment ###
The application is written in Scala 2.13


### How to run this program ###

java -DtaxiTrip.gridSize.latLngGridSize=15 -DtaxiTrip.gridSize.dateTimeGridSize=30 -DtaxiTrip.inputFile.tripData=./data/green_tripdata_2022-02.csv -DtaxiTrip.inputFile.zoneData=./data/taxi_zones.csv -jar taxitrip-assembly-0.1.0-SNAPSHOT.jar com.ypu.taxitrip.TaxiTrip::main

**When using 2022-02 green taxi trip data with 15x15x30 grid, I got below outputs:**

Q1: The highest 50 spatio-temporal cells, by pickup coordinates, in terms of aggregated passengers count and fare amount.

top 50 cell by pickup location in terms of passenger_count sum:
-73.81112552377873,40.71980466548088,2022-02-03T21:14:02.198-05:00 sum passenger count: 154.0
-73.81112552377873,40.71980466548088,2022-02-04T20:18:19.264-05:00 sum passenger count: 151.0
-73.81112552377873,40.71980466548088,2022-02-19T06:22:35.254-05:00 sum passenger count: 147.0
-73.95928080356985,40.83164930063614,2022-02-18T07:18:18.188-05:00 sum passenger count: 145.0
-73.92224198362207,40.803688141847324,2022-02-19T06:22:35.254-05:00 sum passenger count: 143.0
-73.95928080356985,40.83164930063614,2022-02-24T01:44:00.584-05:00 sum passenger count: 142.0
-73.95928080356985,40.83164930063614,2022-02-25T00:48:17.650-05:00 sum passenger count: 137.0
-73.92224198362207,40.803688141847324,2022-02-26T22:56:51.782-05:00 sum passenger count: 135.0
-73.92224198362207,40.803688141847324,2022-02-15T10:05:26.990-05:00 sum passenger count: 131.0
-73.81112552377873,40.71980466548088,2022-02-18T07:18:18.188-05:00 sum passenger count: 130.0
-73.95928080356985,40.83164930063614,2022-02-23T02:39:43.518-05:00 sum passenger count: 128.0
-73.92224198362207,40.803688141847324,2022-02-05T19:22:36.330-05:00 sum passenger count: 128.0
-73.95928080356985,40.83164930063614,2022-02-16T09:09:44.056-05:00 sum passenger count: 128.0
-73.92224198362207,40.803688141847324,2022-02-12T12:52:35.792-05:00 sum passenger count: 127.0
-73.81112552377873,40.71980466548088,2022-02-11T13:48:18.726-05:00 sum passenger count: 126.0
-73.92224198362207,40.803688141847324,2022-02-13T11:56:52.858-05:00 sum passenger count: 125.0
-73.92224198362207,40.803688141847324,2022-02-27T22:01:08.848-05:00 sum passenger count: 125.0
-73.81112552377873,40.71980466548088,2022-02-01T23:05:28.066-05:00 sum passenger count: 124.0
-73.95928080356985,40.83164930063614,2022-02-19T06:22:35.254-05:00 sum passenger count: 124.0
-73.81112552377873,40.71980466548088,2022-02-24T01:44:00.584-05:00 sum passenger count: 123.0
-73.92224198362207,40.803688141847324,2022-02-24T01:44:00.584-05:00 sum passenger count: 121.0
-73.95928080356985,40.83164930063614,2022-02-25T23:52:34.716-05:00 sum passenger count: 121.0
-73.92224198362207,40.803688141847324,2022-02-14T11:01:09.924-05:00 sum passenger count: 121.0
-73.81112552377873,40.71980466548088,2022-02-05T19:22:36.330-05:00 sum passenger count: 119.0
-73.92224198362207,40.803688141847324,2022-02-25T23:52:34.716-05:00 sum passenger count: 119.0
-73.95928080356985,40.83164930063614,2022-02-05T19:22:36.330-05:00 sum passenger count: 118.0
-73.92224198362207,40.803688141847324,2022-02-04T20:18:19.264-05:00 sum passenger count: 115.0
-73.92224198362207,40.803688141847324,2022-02-18T07:18:18.188-05:00 sum passenger count: 114.0
-73.95928080356985,40.83164930063614,2022-02-12T12:52:35.792-05:00 sum passenger count: 114.0
-73.95928080356985,40.83164930063614,2022-02-11T13:48:18.726-05:00 sum passenger count: 113.0
-73.92224198362207,40.803688141847324,2022-02-03T21:14:02.198-05:00 sum passenger count: 112.0
-73.92224198362207,40.803688141847324,2022-02-17T08:14:01.122-05:00 sum passenger count: 111.0
-73.81112552377873,40.71980466548088,2022-02-09T15:39:44.594-05:00 sum passenger count: 110.0
-73.81112552377873,40.71980466548088,2022-02-02T22:09:45.132-05:00 sum passenger count: 109.0
-73.95928080356985,40.83164930063614,2022-02-28T21:05:25.914-05:00 sum passenger count: 108.0
-73.95928080356985,40.83164930063614,2022-02-22T03:35:26.452-05:00 sum passenger count: 108.0
-73.95928080356985,40.83164930063614,2022-02-17T08:14:01.122-05:00 sum passenger count: 107.0
-73.92224198362207,40.803688141847324,2022-02-25T00:48:17.650-05:00 sum passenger count: 107.0
-73.81112552377873,40.71980466548088,2022-02-17T08:14:01.122-05:00 sum passenger count: 107.0
-73.92224198362207,40.803688141847324,2022-02-20T05:26:52.320-05:00 sum passenger count: 107.0
-73.95928080356985,40.83164930063614,2022-02-10T14:44:01.660-05:00 sum passenger count: 105.0
-73.81112552377873,40.71980466548088,2022-02-15T10:05:26.990-05:00 sum passenger count: 104.0
-73.92224198362207,40.803688141847324,2022-02-21T04:31:09.386-05:00 sum passenger count: 104.0
-73.92224198362207,40.803688141847324,2022-02-16T09:09:44.056-05:00 sum passenger count: 104.0
-73.81112552377873,40.71980466548088,2022-02-23T02:39:43.518-05:00 sum passenger count: 104.0
-73.81112552377873,40.71980466548088,2022-02-25T00:48:17.650-05:00 sum passenger count: 104.0
-73.92224198362207,40.803688141847324,2022-02-28T21:05:25.914-05:00 sum passenger count: 100.0
-73.95928080356985,40.83164930063614,2022-02-15T10:05:26.990-05:00 sum passenger count: 100.0
-73.95928080356985,40.83164930063614,2022-02-02T22:09:45.132-05:00 sum passenger count: 100.0
-73.81112552377873,40.71980466548088,2022-02-14T11:01:09.924-05:00 sum passenger count: 99.0

top 50 cell by pickup location in terms of fare_amount sum:
-73.92224198362207,40.85961045942495,2022-02-17T08:14:01.122-05:00 sum fare amount: 1438.4099999999996
-73.95928080356985,40.83164930063614,2022-02-18T07:18:18.188-05:00 sum fare amount: 1392.01
-73.92224198362207,40.803688141847324,2022-02-18T07:18:18.188-05:00 sum fare amount: 1378.3099999999995
-73.92224198362207,40.85961045942495,2022-02-24T01:44:00.584-05:00 sum fare amount: 1334.97
-73.92224198362207,40.85961045942495,2022-02-02T22:09:45.132-05:00 sum fare amount: 1324.7400000000002
-73.81112552377873,40.71980466548088,2022-02-03T21:14:02.198-05:00 sum fare amount: 1312.5800000000002
-73.92224198362207,40.803688141847324,2022-02-26T22:56:51.782-05:00 sum fare amount: 1309.1200000000003
-73.95928080356985,40.83164930063614,2022-02-25T00:48:17.650-05:00 sum fare amount: 1300.6599999999996
-73.95928080356985,40.83164930063614,2022-02-16T09:09:44.056-05:00 sum fare amount: 1299.77
-73.92224198362207,40.803688141847324,2022-02-13T11:56:52.858-05:00 sum fare amount: 1281.7700000000004
-73.92224198362207,40.85961045942495,2022-02-25T00:48:17.650-05:00 sum fare amount: 1261.2099999999996
-73.92224198362207,40.803688141847324,2022-02-19T06:22:35.254-05:00 sum fare amount: 1254.8799999999997
-73.95928080356985,40.83164930063614,2022-02-19T06:22:35.254-05:00 sum fare amount: 1254.3599999999997
-73.92224198362207,40.85961045942495,2022-02-28T21:05:25.914-05:00 sum fare amount: 1241.38
-73.92224198362207,40.803688141847324,2022-02-27T22:01:08.848-05:00 sum fare amount: 1239.3600000000001
-73.95928080356985,40.83164930063614,2022-02-24T01:44:00.584-05:00 sum fare amount: 1220.2999999999997
-73.92224198362207,40.85961045942495,2022-02-23T02:39:43.518-05:00 sum fare amount: 1204.4199999999998
-73.81112552377873,40.71980466548088,2022-02-19T06:22:35.254-05:00 sum fare amount: 1189.21
-73.95928080356985,40.83164930063614,2022-02-23T02:39:43.518-05:00 sum fare amount: 1160.4100000000003
-73.81112552377873,40.71980466548088,2022-02-04T20:18:19.264-05:00 sum fare amount: 1152.62
-73.81112552377873,40.71980466548088,2022-02-11T13:48:18.726-05:00 sum fare amount: 1152.3899999999999
-73.92224198362207,40.803688141847324,2022-02-12T12:52:35.792-05:00 sum fare amount: 1140.5600000000002
-73.81112552377873,40.71980466548088,2022-02-05T19:22:36.330-05:00 sum fare amount: 1140.1399999999999
-73.95928080356985,40.83164930063614,2022-02-25T23:52:34.716-05:00 sum fare amount: 1134.8399999999997
-73.92224198362207,40.803688141847324,2022-02-04T20:18:19.264-05:00 sum fare amount: 1131.6000000000001
-73.81112552377873,40.71980466548088,2022-02-01T23:05:28.066-05:00 sum fare amount: 1119.91
-73.95928080356985,40.83164930063614,2022-02-12T12:52:35.792-05:00 sum fare amount: 1113.2799999999997
-73.92224198362207,40.85961045942495,2022-02-04T20:18:19.264-05:00 sum fare amount: 1103.82
-73.95928080356985,40.83164930063614,2022-02-26T22:56:51.782-05:00 sum fare amount: 1085.0099999999998
-73.92224198362207,40.85961045942495,2022-02-08T16:35:27.528-05:00 sum fare amount: 1084.27
-73.81112552377873,40.71980466548088,2022-02-02T22:09:45.132-05:00 sum fare amount: 1075.8899999999999
-73.92224198362207,40.803688141847324,2022-02-05T19:22:36.330-05:00 sum fare amount: 1073.18
-73.92224198362207,40.803688141847324,2022-02-07T17:31:10.462-05:00 sum fare amount: 1070.6500000000003
-73.95928080356985,40.83164930063614,2022-02-05T19:22:36.330-05:00 sum fare amount: 1068.6000000000001
-73.92224198362207,40.85961045942495,2022-02-12T12:52:35.792-05:00 sum fare amount: 1065.6899999999998
-73.92224198362207,40.85961045942495,2022-02-15T10:05:26.990-05:00 sum fare amount: 1064.34
-73.92224198362207,40.85961045942495,2022-02-03T21:14:02.198-05:00 sum fare amount: 1055.31
-73.92224198362207,40.803688141847324,2022-02-24T01:44:00.584-05:00 sum fare amount: 1050.7299999999998
-73.92224198362207,40.803688141847324,2022-02-16T09:09:44.056-05:00 sum fare amount: 1045.9100000000003
-73.95928080356985,40.83164930063614,2022-02-11T13:48:18.726-05:00 sum fare amount: 1041.2
-73.81112552377873,40.71980466548088,2022-02-18T07:18:18.188-05:00 sum fare amount: 1032.7
-73.95928080356985,40.83164930063614,2022-02-28T21:05:25.914-05:00 sum fare amount: 1031.75
-73.92224198362207,40.85961045942495,2022-02-19T06:22:35.254-05:00 sum fare amount: 1026.51
-73.92224198362207,40.803688141847324,2022-02-20T05:26:52.320-05:00 sum fare amount: 1026.08
-73.92224198362207,40.85961045942495,2022-02-11T13:48:18.726-05:00 sum fare amount: 1020.7700000000001
-73.92224198362207,40.85961045942495,2022-02-25T23:52:34.716-05:00 sum fare amount: 1019.02
-73.92224198362207,40.803688141847324,2022-02-17T08:14:01.122-05:00 sum fare amount: 1016.2500000000002
-73.92224198362207,40.803688141847324,2022-02-14T11:01:09.924-05:00 sum fare amount: 1011.1400000000001
-73.81112552377873,40.71980466548088,2022-02-10T14:44:01.660-05:00 sum fare amount: 1001.86
-73.92224198362207,40.803688141847324,2022-02-21T04:31:09.386-05:00 sum fare amount: 994.3799999999999


Q2:The highest 10 days in terms of trips count across the whole city
Wed Feb 02 00:00:00 EST 2022 number of trips: 1093
Sat Feb 26 00:00:00 EST 2022 number of trips: 1012
Sat Feb 19 00:00:00 EST 2022 number of trips: 627
Fri Feb 18 00:00:00 EST 2022 number of trips: 607
Sat Feb 05 00:00:00 EST 2022 number of trips: 585
Fri Feb 25 00:00:00 EST 2022 number of trips: 583
Fri Feb 04 00:00:00 EST 2022 number of trips: 579
Thu Feb 24 00:00:00 EST 2022 number of trips: 571
Sat Feb 12 00:00:00 EST 2022 number of trips: 560
Thu Feb 03 00:00:00 EST 2022 number of trips: 546


Q3: The highest 50 pickup-dropoff spatial cells pair - the most common trips that picked up in cell1 and droped off in cell2
from -73.81112552377873,40.71980466548088 to -73.81112552377873,40.71980466548088 number of trips: 1104
from -73.95928080356985,40.83164930063614 to -73.95928080356985,40.803688141847324 number of trips: 928
from -73.92224198362207,40.803688141847324 to -73.92224198362207,40.803688141847324 number of trips: 644
from -73.92224198362207,40.803688141847324 to -73.95928080356985,40.803688141847324 number of trips: 625
from -73.95928080356985,40.83164930063614 to -73.95928080356985,40.775726983058505 number of trips: 490
from -73.92224198362207,40.803688141847324 to -73.95928080356985,40.83164930063614 number of trips: 404
from -73.92224198362207,40.803688141847324 to -73.95928080356985,40.775726983058505 number of trips: 401
from -73.92224198362207,40.85961045942495 to -73.95928080356985,40.803688141847324 number of trips: 392
from -73.95928080356985,40.83164930063614 to -73.95928080356985,40.83164930063614 number of trips: 378
from -73.92224198362207,40.69184350669207 to -73.92224198362207,40.69184350669207 number of trips: 376
from -73.92224198362207,40.85961045942495 to -73.92224198362207,40.85961045942495 number of trips: 322
from -73.95928080356985,40.83164930063614 to -73.92224198362207,40.803688141847324 number of trips: 279
from -73.92224198362207,40.85961045942495 to -73.95928080356985,40.775726983058505 number of trips: 263
from -73.81112552377873,40.71980466548088 to -73.84816434372651,40.71980466548088 number of trips: 260
from -73.81112552377873,40.71980466548088 to -73.77408670383096,40.74776582426969 number of trips: 245
from -73.81112552377873,40.71980466548088 to -73.77408670383096,40.69184350669207 number of trips: 231
from -73.95928080356985,40.803688141847324 to -73.95928080356985,40.803688141847324 number of trips: 226
from -73.81112552377873,40.71980466548088 to -73.84816434372651,40.74776582426969 number of trips: 224
from -73.95928080356985,40.83164930063614 to -73.92224198362207,40.85961045942495 number of trips: 192
from -73.95928080356985,40.803688141847324 to -73.95928080356985,40.775726983058505 number of trips: 191
from -73.92224198362207,40.803688141847324 to -73.92224198362207,40.775726983058505 number of trips: 167
from -73.92224198362207,40.803688141847324 to -73.92224198362207,40.85961045942495 number of trips: 163
from -73.95928080356985,40.71980466548088 to -73.95928080356985,40.71980466548088 number of trips: 161
from -73.95928080356985,40.69184350669207 to -73.95928080356985,40.69184350669207 number of trips: 154
from -73.92224198362207,40.803688141847324 to -73.92224198362207,40.83164930063614 number of trips: 149
from -73.95928080356985,40.66388234790325 to -73.95928080356985,40.66388234790325 number of trips: 149
from -73.92224198362207,40.775726983058505 to -73.92224198362207,40.775726983058505 number of trips: 141
from -73.95928080356985,40.69184350669207 to -73.95928080356985,40.66388234790325 number of trips: 140
from -73.95928080356985,40.66388234790325 to -73.95928080356985,40.69184350669207 number of trips: 139
from -73.95928080356985,40.83164930063614 to -73.92224198362207,40.83164930063614 number of trips: 137
from -73.95928080356985,40.71980466548088 to -73.92224198362207,40.69184350669207 number of trips: 129
from -73.81112552377873,40.775726983058505 to -73.81112552377873,40.775726983058505 number of trips: 127
from -73.92224198362207,40.85961045942495 to -73.95928080356985,40.83164930063614 number of trips: 123
from -73.92224198362207,40.85961045942495 to -73.92224198362207,40.775726983058505 number of trips: 123
from -73.95928080356985,40.69184350669207 to -73.92224198362207,40.69184350669207 number of trips: 119
from -73.95928080356985,40.83164930063614 to -73.92224198362207,40.775726983058505 number of trips: 113
from -73.95928080356985,40.66388234790325 to -73.92224198362207,40.69184350669207 number of trips: 110
from -73.84816434372651,40.71980466548088 to -73.81112552377873,40.71980466548088 number of trips: 110
from -73.92224198362207,40.85961045942495 to -73.92224198362207,40.88757161821376 number of trips: 110
from -73.92224198362207,40.74776582426969 to -73.92224198362207,40.74776582426969 number of trips: 109
from -73.92224198362207,40.85961045942495 to -73.99631962351764,40.775726983058505 number of trips: 109
from -73.95928080356985,40.83164930063614 to -73.99631962351764,40.775726983058505 number of trips: 108
from -73.95928080356985,40.775726983058505 to -73.95928080356985,40.775726983058505 number of trips: 107
from -73.84816434372651,40.74776582426969 to -73.81112552377873,40.71980466548088 number of trips: 107
from -73.88520316367429,40.83164930063614 to -73.88520316367429,40.83164930063614 number of trips: 102
from -73.95928080356985,40.775726983058505 to -73.95928080356985,40.803688141847324 number of trips: 102
from -73.95928080356985,40.71980466548088 to -73.95928080356985,40.69184350669207 number of trips: 100
from -73.92224198362207,40.83164930063614 to -73.95928080356985,40.803688141847324 number of trips: 99
from -73.92224198362207,40.803688141847324 to -73.99631962351764,40.775726983058505 number of trips: 99
from -73.92224198362207,40.803688141847324 to -73.88520316367429,40.83164930063614 number of trips: 97

### Who do I talk to? ###
puyu1505@gmail.com
